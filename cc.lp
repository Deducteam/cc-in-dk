
// Universe levels
constant symbol ğ”– : TYPE;
constant symbol 0 : ğ”–; // 0 = Prop
constant symbol S : ğ”– â†’ ğ”–; // s n = Typeâ‚™

symbol ğ”„ : ğ”– â†’ ğ”–;
rule ğ”„ 0      â†ª S (S 0);
rule ğ”„ (S $l) â†ª S (S $l);

symbol P : ğ”– â†’ ğ”–;
rule P 0      â†ª 0;
rule P (S $l) â†ª $l;

symbol - : ğ”– â†’ ğ”– â†’ ğ”–;
notation - infix 7;
rule $lâ‚ - 0       â†ª $lâ‚;
rule $lâ‚ - (S $lâ‚‚) â†ª (P $lâ‚) - $lâ‚‚;

symbol + : ğ”– â†’ ğ”– â†’ ğ”–;
notation + infix 4;
rule 0       + $lâ‚‚     â†ª $lâ‚‚
with $lâ‚     + 0       â†ª $lâ‚
with (S $lâ‚) + $lâ‚‚     â†ª S ($lâ‚ + $lâ‚‚)
with $lâ‚     + (S $lâ‚‚) â†ª S ($lâ‚ + $lâ‚‚);


symbol âˆ¨ : ğ”– â†’ ğ”– â†’ ğ”–;
notation âˆ¨ infix 7;
rule 0       âˆ¨ $lâ‚‚     â†ª $lâ‚‚
with $lâ‚     âˆ¨ 0       â†ª $lâ‚
with (S $lâ‚) âˆ¨ (S $lâ‚‚) â†ª S ($lâ‚ âˆ¨ $lâ‚‚);

symbol ğ”‘ : ğ”– â†’ ğ”– â†’ ğ”–;
rule ğ”‘ $lâ‚ 0       â†ª 0
with ğ”‘ $lâ‚ (S $lâ‚‚) â†ª $lâ‚ âˆ¨ (S $lâ‚‚);

// Universe
constant symbol U : ğ”– â†’ TYPE;
symbol El (l : ğ”–) (A : U l) : TYPE;

// codes for universes
constant symbol u (l : ğ”–) : U (ğ”„ l);
rule El _ (u $l) â†ª U $l;


// codes for dependent products
symbol Ï€ (lâ‚€ lâ‚ lâ‚‚ : ğ”–) (A : U (lâ‚€ + lâ‚)) (B : El (lâ‚€ + lâ‚) A â†’ U (lâ‚€ + lâ‚‚)) : U (ğ”‘ (lâ‚€ + lâ‚) (lâ‚€ + lâ‚‚));
rule El _ (Ï€ $lâ‚€ $lâ‚ $lâ‚‚ $A (Î» x : _, $B.[x])) â†ª Î  x : El ($lâ‚€ + $lâ‚) $A, El ($lâ‚€ + $lâ‚‚) $B.[x];

rule Ï€ $l0 (S $l1) (S $l2) $A $B â†ª Ï€ (S $l0) $l1 $l2 $A $B;


// Encoding of telescopes
constant symbol Tele : TYPE;
constant symbol â‹„ : Tele;
symbol â— (l : ğ”–) (A : U l) (a : El l A â†’ Tele) : Tele;

symbol â‡’ (Î” : Tele) (l : ğ”–) : TYPE;
notation â‡’ infix 5;
rule â‹„                            â‡’ $lâ‚ â†ª U $lâ‚;
rule (â— $lâ‚‚ $A (Î» x : _, $Î”.[x])) â‡’ $lâ‚ â†ª Î  x : El $lâ‚‚ $A, $Î”.[x] â‡’ $lâ‚;


// lift
symbol â†‘ (l : ğ”–) (Î” : Tele) (t : Î” â‡’ l) : Î” â‡’ (S l);
rule El $l (â†‘ _ â‹„ $A) â†ª El (P $l) $A;

rule â— $l (â†‘ _ â‹„ $A) $Î” â†ª â— (P $l) $A $Î”;


// â†‘ (Î» x, t) â†ª Î» x, â†‘ t
rule â†‘ $l (â— _ _ (Î» x : _,$Î”.[x])) (Î» x : $A, $t.[x])   â†ª Î» x : $A, â†‘ $l $Î”.[x] $t.[x];
// (â†‘ t) u    â†ª â†‘ (t u)
rule â†‘ $l (â— _ _ (Î» x : _,$Î”.[x])) $t $u                â†ª â†‘ $l $Î”.[$u] ($t $u);


symbol â‡‘ (l : ğ”–) (A : U 0) : U l;
rule â‡‘ 0      $A â†ª $A;
rule â‡‘ (S $l) $A â†ª â†‘ $l â‹„ (â‡‘ $l $A);

rule El $lâ‚‚ (â‡‘ $lâ‚ $A) â†ª El ($lâ‚‚ - $lâ‚) $A;


rule Ï€ 0           (S $l)  0       (â†‘ _ â‹„ $A) $B                       â†ª                      Ï€ 0       $l      0       $A $B;
rule Ï€ (S $lâ‚)     0       $lâ‚‚     (â†‘ _ â‹„ $A) $B                       â†ª                      Ï€ $lâ‚     0       (S $lâ‚‚) $A $B;
rule Ï€ (S $lâ‚)     (S $lâ‚‚) 0       (â†‘ _ â‹„ $A) $B                       â†ª â†‘ (S ($lâ‚ + $lâ‚‚)) â‹„ (Ï€ (S $lâ‚) $lâ‚‚     0       $A $B);

rule Ï€ (S (S $lâ‚)) $lâ‚‚     0       $A         (Î» x : $C, â†‘ _ â‹„ $B.[x]) â†ª                      Ï€ (S $lâ‚) (S $lâ‚‚) 0       $A (Î» x : $C, $B.[x]);
rule Ï€ $lâ‚         0       (S $lâ‚‚) $A         (Î» x : $C, â†‘ _ â‹„ $B.[x]) â†ª â†‘ ($lâ‚ + $lâ‚‚) â‹„     (Ï€ $lâ‚     0       $lâ‚‚     $A (Î» x : $C, $B.[x]));
rule Ï€ (S 0)       $l      0       $A         (Î» x : $C, â†‘ _ â‹„ $B.[x]) â†ª â‡‘ (S $l)            (Ï€ 0       (S $l)  0       $A (Î» x : $C, $B.[x]));
